groups:
- name: maie-api
  rules:
  - alert: MaieHighLatencyScoreExpected
    expr: histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{path="/score_expected"}[5m])) by (le)) > 0.200
    for: 10m
    labels: { severity: warning }
    annotations:
      description: "p95 latency for /score_expected > 200ms for 10m"

  - alert: MaieReadyFailing
    expr: probe_success{job="maie-ready"} == 0
    for: 5m
    labels: { severity: critical }
    annotations:
      description: "Readiness failing for 5m"

  - alert: MaieNoNewExpected
    expr: (time() - max(maie_expected_latest_timestamp)) > 36 * 3600
    for: 0m
    labels: { severity: warning }
    annotations:
      description: "expected_latest not updated in >36h"
